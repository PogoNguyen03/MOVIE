<IfModule mod_rewrite.c>
Options +FollowSymlinks -Multiviews
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?/$1 [QSA,PT,L]
</IfModule>

# Tăng giới hạn bộ nhớ và thời gian thực thi cho PHP
php_value memory_limit 512M
php_value max_execution_time 0
php_value max_input_time 0
php_value post_max_size 64M
php_value upload_max_filesize 64M
php_value max_input_vars 3000

# Bật ghi log lỗi
php_flag log_errors on
php_value error_log ${DOCUMENT_ROOT}/logs/php_errors.log
php_value log_errors_max_len 1M

# Tắt hiển thị lỗi trong môi trường production
php_flag display_errors off
php_flag display_startup_errors off

# Tối ưu hiệu suất
php_value output_buffering 4096
php_value zlib.output_compression On
php_value zlib.output_compression_level 4

# Cấu hình session
php_value session.gc_maxlifetime 1440
php_value session.gc_probability 1
php_value session.gc_divisor 100